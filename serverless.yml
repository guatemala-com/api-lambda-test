service: aprende-headless-api # Coincide con tu FUNCTION_NAME

frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs20.x
  stage: dev
  region: us-west-2 # Coincide con tu AWS_REGION

package:
  individually: true
  patterns:
    - '!node_modules/**'
    - 'node_modules/aws-sdk/**' # Excluir aws-sdk, ya está en el entorno Lambda
    - 'node_modules/aws-lambda/**'

functions:
  main:
    handler: dist/lambda.handler # Ruta al handler en el código compilado
    events:
      - httpApi: # Crea un API Gateway para acceder a tu función
          path: /{proxy+}
          method: '*'